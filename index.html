<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/dog.svg" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>KlavHub</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
      integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
      crossorigin=""
    />
    <link
      rel="preload"
      href="/fonts/Fredoka-Regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin="anonymous"
    />
    <style>
      #preload {
        position: fixed;
        inset: 0;
        background: white;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        gap: 48px;
        align-items: center;
        padding: 40px 24px;
        margin-top: 20%;
        box-sizing: border-box;
      }

      #paw {
        position: fixed;
        inset: 0;
        z-index: 9998;
      }

      .paw-container {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .joke-container {
        text-align: center;
        position: relative;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease, transform 0.6s ease;
        font-family: 'Fredoka', sans-serif;
        font-weight: normal;
        color: #ec4899;
      }

      .joke-container.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .question,
      .answer {
        opacity: 0;
        visibility: hidden;
        transition: opacity 1s ease, visibility 1s ease;
      }

      .question.visible {
        opacity: 1;
        visibility: visible;
      }

      .answer.visible {
        opacity: 1;
        visibility: visible;
      }

      .joke-container.fade-out {
        opacity: 0;
        transform: translateY(-20px);
      }

      .question {
        font-size: 24px;
        min-height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .answer {
        font-size: 20px;
        margin-top: 12px;
        min-height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
    </style>
  </head>
  <body>
    <div id="preload">
      <div id="joke" class="joke-container">
        <div id="question" class="question"></div>
        <div id="answer" class="answer"></div>
      </div>

      <div id="paw" class="paw-container">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          width="80"
          height="80"
        >
          <style>
            @keyframes fillCycle1 {
              0%,
              33.3%,
              66.7%,
              100% {
                fill: white;
              }
              0.1%,
              33.2% {
                fill: #ec4899;
              }
            }
            @keyframes fillCycle2 {
              0%,
              33.3%,
              66.7%,
              100% {
                fill: white;
              }
              33.4%,
              66.6% {
                fill: #9ac457;
              }
            }
            @keyframes fillCycle3 {
              0%,
              33.3%,
              66.7%,
              100% {
                fill: white;
              }
              66.8%,
              99.9% {
                fill: #ecac52;
              }
            }

            .rotate {
              transform: rotate(-45deg);
              transform-origin: center;
            }

            #left-paw {
              animation: fillCycle1 1.5s infinite steps(1);
              stroke: #0da2e7;
            }
            #middle-paw {
              animation: fillCycle2 1.5s infinite steps(1);
              stroke: #0da2e7;
            }
            #right-paw {
              animation: fillCycle3 1.5s infinite steps(1);
              stroke: #0da2e7;
            }
            #main-paw {
              fill: white;
              stroke: #0da2e7;
            }
          </style>

          <g class="rotate">
            <circle
              id="left-paw"
              cx="11"
              cy="4"
              r="2"
              stroke-width="1"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <circle
              id="middle-paw"
              cx="18"
              cy="8"
              r="2"
              stroke-width="1"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <circle
              id="right-paw"
              cx="20"
              cy="16"
              r="2"
              stroke-width="1"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              id="main-paw"
              d="M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z"
              stroke-width="1"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </g>
        </svg>
      </div>

      <script>
        const jokes = [
          {
            q: 'Why did the dog sit in the shade?',
            a: 'Because he didn’t want to be a hot dog.',
          },
          {
            q: 'Why did the dog bring toilet paper to the party?',
            a: 'Because he was a party pooper.',
          },
          { q: 'What type of markets do dogs avoid?', a: 'Flea markets.' },
          { q: 'What’s a dog’s favorite instrument?', a: 'The trom-bone.' },
          { q: 'What do you call a dog magician?', a: 'A labra-cadabra-dor!' },
        ];

        const jokeEl = document.getElementById('joke');
        const questionEl = document.getElementById('question');
        const answerEl = document.getElementById('answer');

        let index = 0;

        const showJoke = (joke) => {
          jokeEl.classList.remove('fade-out', 'visible');
          questionEl.classList.remove('visible');
          answerEl.classList.remove('visible');
          questionEl.textContent = '';
          answerEl.textContent = '';

          questionEl.textContent = joke.q;
          answerEl.textContent = joke.a;

          setTimeout(() => {
            jokeEl.classList.add('visible');
            questionEl.classList.add('visible');

            setTimeout(() => {
              answerEl.classList.add('visible');

              setTimeout(() => {
                jokeEl.classList.remove('visible');
                jokeEl.classList.add('fade-out');

                setTimeout(() => {
                  index = (index + 1) % jokes.length;
                  showJoke(jokes[index]);
                }, 1000);
              }, 3000);
            }, 2000);
          }, 1700);
        };

        showJoke(jokes[index]);
      </script>
    </div>
    <div id="root"></div>
    <div id="modal"></div>
    <script
      src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
      integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
      crossorigin=""
    ></script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
